<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Regex Tests - Campus Life Planner</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 20px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    
    h1 {
      color: #2563eb;
    }
    
    h2 {
      color: #333;
      margin-top: 30px;
      border-bottom: 2px solid #ddd;
      padding-bottom: 5px;
    }
    
    .pattern {
      background: #f0f0f0;
      padding: 10px;
      margin: 10px 0;
      font-family: monospace;
      border-left: 3px solid #2563eb;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
      background: white;
    }
    
    th {
      background: #2563eb;
      color: white;
      padding: 10px;
      text-align: left;
    }
    
    td {
      padding: 8px;
      border-bottom: 1px solid #ddd;
    }
    
    tr:hover {
      background: #f9f9f9;
    }
    
    .pass {
      color: green;
      font-weight: bold;
    }
    
    .fail {
      color: red;
      font-weight: bold;
    }
    
    .summary {
      background: #e3f2fd;
      padding: 15px;
      margin-top: 30px;
      border-radius: 5px;
    }
    
    .summary h3 {
      margin-top: 0;
    }
  </style>
</head>
<body>
  <h1>M3 Regex Validation Tests</h1>
  <p>Testing all 5 regex patterns with positive and negative cases</p>
  
  <div id="results"></div>
  
  <div class="summary">
    <h3>Test Summary</h3>
    <p>Total Tests: <strong id="total">0</strong></p>
    <p>Passed: <strong id="passed" style="color: green;">0</strong></p>
    <p>Failed: <strong id="failed" style="color: red;">0</strong></p>
  </div>
  
  <script type="module">
    import { REGEX_PATTERNS } from './scripts/validators.js';
    
    // Test data - about 4-5 tests per pattern
    const tests = [
      {
        name: 'Title Pattern',
        regex: REGEX_PATTERNS.title,
        pattern: '/^\\S(?:.*\\S)?$/',
        cases: [
          { input: 'Study for midterm', expected: true },
          { input: 'Team meeting', expected: true },
          { input: ' leading space', expected: false },
          { input: 'trailing space ', expected: false },
          { input: 'double  space', expected: false }
        ]
      },
      {
        name: 'Duration Pattern',
        regex: REGEX_PATTERNS.duration,
        pattern: '/^(0|[1-9]\\d*)(\\.\\d{1,2})?$/',
        cases: [
          { input: '90', expected: true },
          { input: '120.5', expected: true },
          { input: '0', expected: true },
          { input: '01', expected: false },
          { input: '-5', expected: false }
        ]
      },
      {
        name: 'Date Pattern',
        regex: REGEX_PATTERNS.date,
        pattern: '/^\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$/',
        cases: [
          { input: '2025-10-15', expected: true },
          { input: '2025-01-01', expected: true },
          { input: '2025-13-01', expected: false },
          { input: '25-10-15', expected: false },
          { input: '2025/10/15', expected: false }
        ]
      },
      {
        name: 'Tag Pattern',
        regex: REGEX_PATTERNS.tag,
        pattern: '/^[A-Za-z]+(?:[ -][A-Za-z]+)*$/',
        cases: [
          { input: 'Academic', expected: true },
          { input: 'Work Study', expected: true },
          { input: 'Self-care', expected: true },
          { input: 'Tag123', expected: false },
          { input: ' Academic', expected: false }
        ]
      },
      {
        name: 'Duplicate Word Pattern (Advanced)',
        regex: REGEX_PATTERNS.duplicateWord,
        pattern: '/\\b(\\w+)\\s+\\1\\b/i',
        cases: [
          { input: 'the the meeting', expected: true },
          { input: 'do do this', expected: true },
          { input: 'study hall', expected: false },
          { input: 'Team meeting', expected: false }
        ]
      }
    ];
    
    // Run tests
    let totalTests = 0;
    let passedTests = 0;
    let failedTests = 0;
    
    const resultsDiv = document.getElementById('results');
    
    tests.forEach(test => {
      const section = document.createElement('div');
      
      const heading = document.createElement('h2');
      heading.textContent = test.name;
      section.appendChild(heading);
      
      const pattern = document.createElement('div');
      pattern.className = 'pattern';
      pattern.textContent = test.pattern;
      section.appendChild(pattern);
      
      const table = document.createElement('table');
      table.innerHTML = '<tr><th>Input</th><th>Expected</th><th>Result</th><th>Status</th></tr>';
      
      test.cases.forEach(testCase => {
        totalTests++;
        const result = test.regex.test(testCase.input);
        const passed = result === testCase.expected;
        
        if (passed) {
          passedTests++;
        } else {
          failedTests++;
        }
        
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>"${testCase.input}"</td>
          <td>${testCase.expected ? 'Match' : 'No Match'}</td>
          <td>${result ? 'Match' : 'No Match'}</td>
          <td class="${passed ? 'pass' : 'fail'}">${passed ? 'PASS' : 'FAIL'}</td>
        `;
        table.appendChild(row);
      });
      
      section.appendChild(table);
      resultsDiv.appendChild(section);
    });
    
    // Update summary
    document.getElementById('total').textContent = totalTests;
    document.getElementById('passed').textContent = passedTests;
    document.getElementById('failed').textContent = failedTests;
    
    console.log('Tests run:', totalTests);
    console.log('Passed:', passedTests);
    console.log('Failed:', failedTests);
  </script>
</body>
</html>
